<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>
    <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../bower_components/polymer/polymer.html">
    <link rel="import" href="../bower_components/nodecg-replicant/nodecg-replicant.html">
    <link rel="import" href="../bower_components/sc-fitted-text/sc-fitted-text.html">

    <style>
        body {
            background-color: darkblue;
        }
        #bracket{
            width:1920px;
            height: 1080px;
            position: absolute;
        }
        nodecg-text{
            font-family: Arial, Helvetica, sans-serif;
            color: white;
            font-size: 1.5em;
            width: 5em;
            text-align: center;
            position: absolute;
            transition: opacity 1s;
            opacity: 0;
        }
        .height {
            opacity: 1;
        }
    </style>
</head>
<body>
<div id="target" style="position: absolute; left: 50px; top: 300px; font-size: 100px; letter-spacing: -7px; "></div>
<video id="bracket" loop src="./bracket.webm"></video>

    <div>
        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_00" style="top:238px;  left:185px"></nodecg-text>
        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_01" style="top:338px;  left:185px"></nodecg-text>

        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_02" style="top:435px;  left:185px"></nodecg-text>
        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_03" style="top:535px;  left:185px"></nodecg-text>

        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_02" style="top:435px;  left:185px"></nodecg-text>
        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_03" style="top:535px;  left:185px"></nodecg-text>

        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_04" style="top:633px;  left:185px"></nodecg-text>
        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_05" style="top:733px;  left:185px"></nodecg-text>

        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_06" style="top:830px;  left:185px"></nodecg-text>
        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_07" style="top:930px;  left:185px"></nodecg-text>


        <nodecg-text class="finals4" max-width="190" replicant-name="w1i_00" style="top:285px;  left:390px"></nodecg-text>
        <nodecg-text class="finals4" max-width="190" replicant-name="w1i_01" style="top:485px;  left:390px"></nodecg-text>

        <nodecg-text class="finals4" max-width="190" replicant-name="w1i_02" style="top:680px;  left:390px"></nodecg-text>
        <nodecg-text class="finals4" max-width="190" replicant-name="w1i_03" style="top:880px;  left:390px"></nodecg-text>


        <nodecg-text class="finals2" max-width="190" replicant-name="w0i_00" style="top:395px;  left:595px"></nodecg-text>
        <nodecg-text class="finals2" max-width="190" replicant-name="w0i_01" style="top:785px;  left:595px"></nodecg-text>
        

        <nodecg-text class="finals1" max-width="190" replicant-name="f1i_00" style="top:590px;  left:797px"></nodecg-text>


        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_08" style="top:238px;  left:1630px"></nodecg-text>
        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_09" style="top:338px;  left:1630px"></nodecg-text>

        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_10" style="top:435px;  left:1630px"></nodecg-text>
        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_11" style="top:535px;  left:1630px"></nodecg-text>

        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_12" style="top:633px;  left:1630px"></nodecg-text>
        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_13" style="top:733px;  left:1630px"></nodecg-text>

        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_14" style="top:830px;  left:1630px"></nodecg-text>
        <nodecg-text class="finals8" max-width="190" replicant-name="w2i_15" style="top:930px;  left:1630px"></nodecg-text>


        <nodecg-text class="finals4" max-width="190" replicant-name="w1i_04" style="top:285px;  left:1427px"></nodecg-text>
        <nodecg-text class="finals4" max-width="190" replicant-name="w1i_05" style="top:485px;  left:1427px"></nodecg-text>

        <nodecg-text class="finals4" max-width="190" replicant-name="w1i_06" style="top:680px;  left:1427px"></nodecg-text>
        <nodecg-text class="finals4" max-width="190" replicant-name="w1i_07" style="top:880px;  left:1427px"></nodecg-text>


        <nodecg-text class="finals2" max-width="190" replicant-name="w0i_02" style="top:395px;  left:1222px"></nodecg-text>
        <nodecg-text class="finals2" max-width="190" replicant-name="w0i_03" style="top:785px;  left:1222px"></nodecg-text>

        <nodecg-text class="finals1" max-width="190" replicant-name="f1i_01" style="top:590px;  left:1020px"></nodecg-text>
    </div>

    <dom-module id="nodecg-text">
        <script>
            class NodeCGText extends Polymer.NodeCGReplicantTargeting(customElements.get("sc-fitted-text")) {
                static get is() {
                    return 'nodecg-text';
                }
                static get properties() {
                    return {
                        align: {
                            value: "center",
                        }
                    }
                }
                _replicantValueChanged(newVal) {
                    this.text = newVal;
                }
            }
            customElements.define(NodeCGText.is, NodeCGText);
        </script>
    </dom-module>
</body>
<script>
    bracket_vid = document.getElementById("bracket");

    finals8 = document.getElementsByClassName("finals8")
    finals4 = document.getElementsByClassName("finals4")
    finals2 = document.getElementsByClassName("finals2")
    finals1 = document.getElementsByClassName("finals1")
    frame_old = 0

    setInterval(function () {
        frame = Math.floor(bracket_vid.currentTime*60);

        if(frame > (02)*60){height(finals8, true)}
        if(frame > (12)*60){height(finals4, true)}
        if(frame > (24)*60){height(finals2, true)}
        if(frame > (36)*60){height(finals1, true)}
        if(frame > (45)*60){
            height(finals1, false);
            height(finals2, false);
            height(finals4, false);
            height(finals8, false);
        }
    }, 5);

    function height(target, option){
        Array.from(target).forEach(element => {
            if (option){
                element.classList.add("height");
            }
            else {
                element.classList.remove("height");
            }
            
        });
    }

    bracket_vid.addEventListener('playing', event => {
        height(finals1, false);
        height(finals2, false);
        height(finals4, false);
        height(finals8, false);
    }, false)

    height(finals1, false);
    height(finals2, false);
    height(finals4, false);
    height(finals8, false);
    bracket_vid.play();



</script>
</html>